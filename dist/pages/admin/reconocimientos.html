<!doctype html>
<html lang="es">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Gestión de Reconocimientos | FMH UNACH</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="title" content="Gestión de Reconocimientos | FMH UNACH" />
    <meta name="description" content="Panel de administración para gestionar reconocimientos de la comunidad universitaria" />
    
    <!--begin::Fonts-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/source-sans-3@5.0.12/index.css" integrity="sha256-tXJfXfp6Ewt1ilPzLDtQnJV4hclT9XuaZUKyUvmyr+Q=" crossorigin="anonymous" />
    <!--end::Fonts-->
    
    <!--begin::Third Party Plugin(OverlayScrollbars)-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.10.1/styles/overlayscrollbars.min.css" integrity="sha256-tZHrRjVqNSRyWg2wbppGnT833E/Ys0DHWGwT04GiqQg=" crossorigin="anonymous" />
    <!--end::Third Party Plugin(OverlayScrollbars)-->
    
    <!--begin::Third Party Plugin(Bootstrap Icons)-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" integrity="sha256-9kPW/n5nn53j4WMRYAxe9c1rCY96Oogo/MKSVdKzPmI=" crossorigin="anonymous" />
    <!--end::Third Party Plugin(Bootstrap Icons)-->
    
    <!--begin::Required Plugin(AdminLTE)-->
    <link rel="stylesheet" href="../../../dist/css/adminlte.css" />
    <!--end::Required Plugin(AdminLTE)-->
    
    <meta charset="UTF-8" />
  </head>
  <body class="layout-fixed sidebar-expand-lg bg-body-tertiary">
    <div class="app-wrapper">
      <!--begin::Header-->
      <nav class="app-header navbar navbar-expand" style="background-color: #192d63">
        <div class="container-fluid">
          <div class="d-flex align-items-center w-100">
            <img src="../../../dist/img/logo-unach-azul.png" alt="Logo UNACH" style="max-width: 48px; margin-right: 16px" />
            <div class="flex-grow-1 text-center">
              <span class="fw-bold" style="color: #d4b012; font-size: 1.3rem">Facultad de Medicina Humana "Dr. Manuel Velasco Suárez"</span><br />
              <span class="fw-light text-white" style="font-size: 1rem">Educación que transforma</span>
            </div>
            <div class="d-flex align-items-center">
              <a href="../../../dist/pages/admin/login.html" class="btn btn-outline-light btn-sm me-2" style="border-color: #d4b012; color: #d4b012">
                <i class="bi bi-shield-lock me-1"></i>Administración
              </a>
              <img src="../../../dist/img/jubileo50.png" alt="Jubileo 50 años" style="max-width: 48px; margin-left: 16px" />
            </div>
          </div>
        </div>
      </nav>
      <!--end::Header-->
      
      <!--begin::Sidebar-->
      <aside class="app-sidebar bg-body-secondary shadow" data-bs-theme="dark" style="background-color: #192d63">
        <!--begin::Sidebar Brand-->
        <div class="sidebar-brand">
          <a href="/admin/dashboard" class="brand-link">
            <img src="../../../dist/img/logo-unach-azul.png" alt="Logo UNACH" class="brand-image opacity-75 shadow" />
            <span class="brand-text fw-bold" style="color: #d4b012">ADMIN UNACH</span>
          </a>
        </div>
        <!--end::Sidebar Brand-->
        
        <div class="sidebar-wrapper">
          <nav class="mt-2">
            <ul class="nav sidebar-menu flex-column" role="menu">
              <li class="nav-item">
                <a href="/admin/dashboard" class="nav-link">
                  <i class="nav-icon bi bi-speedometer2" style="color: #d4b012"></i>
                  <p>Dashboard</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="/admin/quejas" class="nav-link">
                  <i class="nav-icon bi bi-exclamation-triangle-fill" style="color: #d4b012"></i>
                  <p>Gestión de Quejas</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="/admin/sugerencias" class="nav-link">
                  <i class="nav-icon bi bi-lightbulb-fill" style="color: #d4b012"></i>
                  <p>Gestión de Sugerencias</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="/admin/reconocimientos" class="nav-link active">
                  <i class="nav-icon bi bi-star-fill" style="color: #d4b012"></i>
                  <p>Gestión de Reconocimientos</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="/admin/usuarios" class="nav-link">
                  <i class="nav-icon bi bi-people-fill" style="color: #d4b012"></i>
                  <p>Gestión de Usuarios</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="/admin/reportes" class="nav-link">
                  <i class="nav-icon bi bi-graph-up" style="color: #d4b012"></i>
                  <p>Reportes y Estadísticas</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="/admin/configuracion" class="nav-link">
                  <i class="nav-icon bi bi-gear-fill" style="color: #d4b012"></i>
                  <p>Configuración</p>
                </a>
              </li>
              <hr style="border-color: #d4b012; opacity: 0.3" />
              <li class="nav-item">
                <a href="/" class="nav-link">
                  <i class="nav-icon bi bi-house-door-fill" style="color: #d4b012"></i>
                  <p>Volver al Sitio</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="#" class="nav-link" id="logoutBtn">
                  <i class="nav-icon bi bi-box-arrow-right" style="color: #d4b012"></i>
                  <p>Cerrar Sesión</p>
                </a>
              </li>
            </ul>
          </nav>
        </div>
      </aside>
      <!--end::Sidebar-->
      
      <main class="app-main">
        <div class="app-content-header">
          <div class="container-fluid">
            <div class="row align-items-center">
              <div class="col-md-2 text-center mb-2 mb-md-0">
                <img src="/dist/img/logo-unach-azul.png" alt="Logo UNACH" style="max-width: 100px" />
              </div>
              <div class="col-md-8 text-center">
                <h2 class="mb-0">Gestión de Reconocimientos</h2>
                <h5>Facultad de Medicina Humana "Dr. Manuel Velasco Suárez" Campus IV</h5>
              </div>
              <div class="col-md-2 text-center mb-2 mb-md-0">
                <img src="/dist/img/jubileo50.png" alt="Jubileo 50 años" style="max-width: 100px" />
              </div>
            </div>
          </div>
        </div>
        
        <div class="app-content">
          <div class="container-fluid">
            <!-- Filtros y Búsqueda -->
            <div class="row mb-4">
              <div class="col-md-6">
                <div class="input-group">
                  <input type="text" class="form-control" placeholder="Buscar reconocimientos..." id="searchInput">
                  <button class="btn btn-outline-secondary" type="button" id="searchBtn">
                    <i class="bi bi-search"></i>
                  </button>
                </div>
              </div>
              <div class="col-md-3">
                <select class="form-select" id="statusFilter">
                  <option value="">Todos los estados</option>
                  <option value="Pendiente">Pendiente</option>
                  <option value="En Revisión">En Revisión</option>
                  <option value="Aprobado">Aprobado</option>
                  <option value="Publicado">Publicado</option>
                  <option value="Rechazado">Rechazado</option>
                </select>
              </div>
              <div class="col-md-3">
                <select class="form-select" id="categoryFilter">
                  <option value="">Todas las categorías</option>
                  <option value="Docente">Docente</option>
                  <option value="Estudiante">Estudiante</option>
                  <option value="Personal Administrativo">Personal Administrativo</option>
                  <option value="Investigación">Investigación</option>
                  <option value="Servicio Social">Servicio Social</option>
                </select>
              </div>
            </div>
            
            <!-- Estadísticas Rápidas -->
            <div class="row g-4 mb-4">
              <div class="col-xl-3 col-md-6">
                <div class="card bg-warning text-white">
                  <div class="card-body">
                    <div class="d-flex justify-content-between">
                      <div>
                        <h3 class="mb-0" id="totalReconocimientos">0</h3>
                        <p class="mb-0">Total Reconocimientos</p>
                      </div>
                      <div class="align-self-center">
                        <i class="bi bi-star-fill fs-1"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xl-3 col-md-6">
                <div class="card bg-info text-white">
                  <div class="card-body">
                    <div class="d-flex justify-content-between">
                      <div>
                        <h3 class="mb-0" id="pendientes">0</h3>
                        <p class="mb-0">Pendientes</p>
                      </div>
                      <div class="align-self-center">
                        <i class="bi bi-clock-fill fs-1"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xl-3 col-md-6">
                <div class="card bg-success text-white">
                  <div class="card-body">
                    <div class="d-flex justify-content-between">
                      <div>
                        <h3 class="mb-0" id="aprobados">0</h3>
                        <p class="mb-0">Aprobados</p>
                      </div>
                      <div class="align-self-center">
                        <i class="bi bi-check-circle-fill fs-1"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xl-3 col-md-6">
                <div class="card bg-primary text-white">
                  <div class="card-body">
                    <div class="d-flex justify-content-between">
                      <div>
                        <h3 class="mb-0" id="publicados">0</h3>
                        <p class="mb-0">Publicados</p>
                      </div>
                      <div class="align-self-center">
                        <i class="bi bi-globe fs-1"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Tabla de Reconocimientos -->
            <div class="card">
              <div class="card-header">
                <h5 class="card-title">Lista de Reconocimientos</h5>
                <div class="card-tools">
                  <button class="btn btn-success btn-sm" data-bs-toggle="modal" data-bs-target="#addReconocimientoModal">
                    <i class="bi bi-plus-circle me-1"></i>Nuevo Reconocimiento
                  </button>
                </div>
              </div>
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-striped" id="reconocimientosTable">
                    <thead>
                      <tr>
                        <th>Folio</th>
                        <th>Fecha</th>
                        <th>Reconocido</th>
                        <th>Categoría</th>
                        <th>Motivo</th>
                        <th>Estado</th>
                        <th>Prioridad</th>
                        <th>Acciones</th>
                      </tr>
                    </thead>
                    <tbody id="reconocimientosTableBody">
                      <!-- Se llenará dinámicamente -->
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
      
      <!--begin::Footer-->
      <footer class="app-footer" style="background-color: #192d63; color: #d4b012; padding: 1rem 0">
        <div class="container-fluid text-center">
          <strong>
            &copy; 2025 Facultad de Medicina Humana "Dr. Manuel Velasco Suárez" - UNACH.<br />
            Carretera Puerto Madero Km. 10.5, Finca Santa Teresa, Tapachula, Chiapas, México | C.P.
            30825 | Tel: (961) 6178000 ext. 5695
          </strong>
          <div style="font-size: 0.9rem; color: #fff">Todos los derechos reservados.</div>
        </div>
      </footer>
      <!--end::Footer-->
    </div>
    
    <!-- Modal para Nuevo Reconocimiento -->
    <div class="modal fade" id="addReconocimientoModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Nuevo Reconocimiento</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <form id="addReconocimientoForm">
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Nombre del Reconocido</label>
                    <input type="text" class="form-control" id="reconocido" required>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Categoría</label>
                    <select class="form-select" id="categoria" required>
                      <option value="">Seleccionar categoría</option>
                      <option value="Docente">Docente</option>
                      <option value="Estudiante">Estudiante</option>
                      <option value="Personal Administrativo">Personal Administrativo</option>
                      <option value="Investigación">Investigación</option>
                      <option value="Servicio Social">Servicio Social</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">Motivo del Reconocimiento</label>
                <input type="text" class="form-control" id="motivo" required>
              </div>
              <div class="mb-3">
                <label class="form-label">Descripción Detallada</label>
                <textarea class="form-control" id="descripcion" rows="4" required></textarea>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Prioridad</label>
                    <select class="form-select" id="prioridad" required>
                      <option value="Baja">Baja</option>
                      <option value="Media">Media</option>
                      <option value="Alta">Alta</option>
                      <option value="Crítica">Crítica</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Estado</label>
                    <select class="form-select" id="estado" required>
                      <option value="Pendiente">Pendiente</option>
                      <option value="En Revisión">En Revisión</option>
                      <option value="Aprobado">Aprobado</option>
                      <option value="Publicado">Publicado</option>
                      <option value="Rechazado">Rechazado</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">Remitente</label>
                <input type="text" class="form-control" id="remitente" required>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="button" class="btn btn-primary" id="saveReconocimientoBtn">Guardar Reconocimiento</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Modal para Ver/Editar Reconocimiento -->
    <div class="modal fade" id="editReconocimientoModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Editar Reconocimiento</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <form id="editReconocimientoForm">
              <input type="hidden" id="editId">
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Nombre del Reconocido</label>
                    <input type="text" class="form-control" id="editReconocido" required>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Categoría</label>
                    <select class="form-select" id="editCategoria" required>
                      <option value="Docente">Docente</option>
                      <option value="Estudiante">Estudiante</option>
                      <option value="Personal Administrativo">Personal Administrativo</option>
                      <option value="Investigación">Investigación</option>
                      <option value="Servicio Social">Servicio Social</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">Motivo del Reconocimiento</label>
                <input type="text" class="form-control" id="editMotivo" required>
              </div>
              <div class="mb-3">
                <label class="form-label">Descripción Detallada</label>
                <textarea class="form-control" id="editDescripcion" rows="4" required></textarea>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Prioridad</label>
                    <select class="form-select" id="editPrioridad" required>
                      <option value="Baja">Baja</option>
                      <option value="Media">Media</option>
                      <option value="Alta">Alta</option>
                      <option value="Crítica">Crítica</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Estado</label>
                    <select class="form-select" id="editEstado" required>
                      <option value="Pendiente">Pendiente</option>
                      <option value="En Revisión">En Revisión</option>
                      <option value="Aprobado">Aprobado</option>
                      <option value="Publicado">Publicado</option>
                      <option value="Rechazado">Rechazado</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">Remitente</label>
                <input type="text" class="form-control" id="editRemitente" required>
              </div>
              <div class="mb-3">
                <label class="form-label">Comentarios del Administrador</label>
                <textarea class="form-control" id="editComentarios" rows="3" placeholder="Agregar comentarios sobre el reconocimiento..."></textarea>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="button" class="btn btn-primary" id="updateReconocimientoBtn">Actualizar Reconocimiento</button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.10.1/browser/overlayscrollbars.browser.es6.min.js" integrity="sha256-dghWARbRe2eLlIJ56wNB+b760ywulqK3DzZYEpsg2fQ=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    <script src="../../../dist/js/adminlte.js"></script>
    
    <script>
      // Verificar autenticación
      if (!localStorage.getItem('adminLoggedIn')) {
        window.location.href = 'login.html';
      }
      
      // Datos simulados de reconocimientos
      let reconocimientos = [
        {
          id: 1,
          folio: 'RC-2024-001',
          fecha: '2024-01-20',
          reconocido: 'Dr. Carlos García',
          categoria: 'Docente',
          motivo: 'Excelente labor docente',
          descripcion: 'Por su destacada labor en la enseñanza y su compromiso con la formación de futuros médicos.',
          estado: 'Aprobado',
          prioridad: 'Alta',
          remitente: 'Comité Académico',
          comentarios: 'Reconocimiento aprobado por méritos académicos'
        },
        {
          id: 2,
          folio: 'RC-2024-002',
          fecha: '2024-01-19',
          reconocido: 'María Elena López',
          categoria: 'Estudiante',
          motivo: 'Liderazgo estudiantil',
          descripcion: 'Por su destacada participación en actividades estudiantiles y liderazgo en proyectos comunitarios.',
          estado: 'En Revisión',
          prioridad: 'Media',
          remitente: 'Asociación de Estudiantes',
          comentarios: 'En proceso de evaluación'
        },
        {
          id: 3,
          folio: 'RC-2024-003',
          fecha: '2024-01-18',
          reconocido: 'Lic. Roberto Martínez',
          categoria: 'Personal Administrativo',
          motivo: 'Eficiencia administrativa',
          descripcion: 'Por su excelente trabajo en la gestión administrativa y atención al público.',
          estado: 'Publicado',
          prioridad: 'Media',
          remitente: 'Dirección de la Facultad',
          comentarios: 'Reconocimiento publicado en el boletín institucional'
        }
      ];
      
      // Función para renderizar la tabla
      function renderReconocimientos(data = reconocimientos) {
        const tbody = document.getElementById('reconocimientosTableBody');
        tbody.innerHTML = '';
        
        data.forEach(reconocimiento => {
          const row = document.createElement('tr');
          row.innerHTML = `
            <td>${reconocimiento.folio}</td>
            <td>${reconocimiento.fecha}</td>
            <td>${reconocimiento.reconocido}</td>
            <td><span class="badge bg-info">${reconocimiento.categoria}</span></td>
            <td>${reconocimiento.motivo}</td>
            <td><span class="badge ${getEstadoBadgeClass(reconocimiento.estado)}">${reconocimiento.estado}</span></td>
            <td><span class="badge ${getPrioridadBadgeClass(reconocimiento.prioridad)}">${reconocimiento.prioridad}</span></td>
            <td>
              <button class="btn btn-sm btn-primary" onclick="viewReconocimiento(${reconocimiento.id})">
                <i class="bi bi-eye"></i>
              </button>
              <button class="btn btn-sm btn-success" onclick="editReconocimiento(${reconocimiento.id})">
                <i class="bi bi-pencil"></i>
              </button>
              <button class="btn btn-sm btn-danger" onclick="deleteReconocimiento(${reconocimiento.id})">
                <i class="bi bi-trash"></i>
              </button>
            </td>
          `;
          tbody.appendChild(row);
        });
        
        updateStats();
      }
      
      // Función para obtener clase del badge de estado
      function getEstadoBadgeClass(estado) {
        switch(estado) {
          case 'Pendiente': return 'bg-warning';
          case 'En Revisión': return 'bg-info';
          case 'Aprobado': return 'bg-success';
          case 'Publicado': return 'bg-primary';
          case 'Rechazado': return 'bg-danger';
          default: return 'bg-secondary';
        }
      }
      
      // Función para obtener clase del badge de prioridad
      function getPrioridadBadgeClass(prioridad) {
        switch(prioridad) {
          case 'Baja': return 'bg-success';
          case 'Media': return 'bg-warning';
          case 'Alta': return 'bg-danger';
          case 'Crítica': return 'bg-dark';
          default: return 'bg-secondary';
        }
      }
      
      // Función para actualizar estadísticas
      function updateStats() {
        document.getElementById('totalReconocimientos').textContent = reconocimientos.length;
        document.getElementById('pendientes').textContent = reconocimientos.filter(r => r.estado === 'Pendiente').length;
        document.getElementById('aprobados').textContent = reconocimientos.filter(r => r.estado === 'Aprobado').length;
        document.getElementById('publicados').textContent = reconocimientos.filter(r => r.estado === 'Publicado').length;
      }
      
      // Función para ver reconocimiento
      function viewReconocimiento(id) {
        const reconocimiento = reconocimientos.find(r => r.id === id);
        if (reconocimiento) {
          alert(`Viendo reconocimiento: ${reconocimiento.motivo}\n\nReconocido: ${reconocimiento.reconocido}\n\nDescripción: ${reconocimiento.descripcion}\n\nEstado: ${reconocimiento.estado}\nPrioridad: ${reconocimiento.prioridad}`);
        }
      }
      
      // Función para editar reconocimiento
      function editReconocimiento(id) {
        const reconocimiento = reconocimientos.find(r => r.id === id);
        if (reconocimiento) {
          document.getElementById('editId').value = reconocimiento.id;
          document.getElementById('editReconocido').value = reconocimiento.reconocido;
          document.getElementById('editCategoria').value = reconocimiento.categoria;
          document.getElementById('editMotivo').value = reconocimiento.motivo;
          document.getElementById('editDescripcion').value = reconocimiento.descripcion;
          document.getElementById('editPrioridad').value = reconocimiento.prioridad;
          document.getElementById('editEstado').value = reconocimiento.estado;
          document.getElementById('editRemitente').value = reconocimiento.remitente;
          document.getElementById('editComentarios').value = reconocimiento.comentarios;
          
          const modal = new bootstrap.Modal(document.getElementById('editReconocimientoModal'));
          modal.show();
        }
      }
      
      // Función para eliminar reconocimiento
      function deleteReconocimiento(id) {
        if (confirm('¿Estás seguro de que quieres eliminar este reconocimiento?')) {
          reconocimientos = reconocimientos.filter(r => r.id !== id);
          renderReconocimientos();
        }
      }
      
      // Función para guardar nuevo reconocimiento
      document.getElementById('saveReconocimientoBtn').addEventListener('click', function() {
        const form = document.getElementById('addReconocimientoForm');
        if (form.checkValidity()) {
          const nuevoReconocimiento = {
            id: reconocimientos.length + 1,
            folio: `RC-2024-${String(reconocimientos.length + 1).padStart(3, '0')}`,
            fecha: new Date().toISOString().split('T')[0],
            reconocido: document.getElementById('reconocido').value,
            categoria: document.getElementById('categoria').value,
            motivo: document.getElementById('motivo').value,
            descripcion: document.getElementById('descripcion').value,
            estado: document.getElementById('estado').value,
            prioridad: document.getElementById('prioridad').value,
            remitente: document.getElementById('remitente').value,
            comentarios: ''
          };
          
          reconocimientos.push(nuevoReconocimiento);
          renderReconocimientos();
          
          // Limpiar formulario y cerrar modal
          form.reset();
          const modal = bootstrap.Modal.getInstance(document.getElementById('addReconocimientoModal'));
          modal.hide();
          
          alert('Reconocimiento guardado exitosamente');
        } else {
          form.reportValidity();
        }
      });
      
      // Función para actualizar reconocimiento
      document.getElementById('updateReconocimientoBtn').addEventListener('click', function() {
        const form = document.getElementById('editReconocimientoForm');
        if (form.checkValidity()) {
          const id = parseInt(document.getElementById('editId').value);
          const index = reconocimientos.findIndex(r => r.id === id);
          
          if (index !== -1) {
            reconocimientos[index] = {
              ...reconocimientos[index],
              reconocido: document.getElementById('editReconocido').value,
              categoria: document.getElementById('editCategoria').value,
              motivo: document.getElementById('editMotivo').value,
              descripcion: document.getElementById('editDescripcion').value,
              prioridad: document.getElementById('editPrioridad').value,
              estado: document.getElementById('editEstado').value,
              remitente: document.getElementById('editRemitente').value,
              comentarios: document.getElementById('editComentarios').value
            };
            
            renderReconocimientos();
            
            // Cerrar modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('editReconocimientoModal'));
            modal.hide();
            
            alert('Reconocimiento actualizado exitosamente');
          }
        } else {
          form.reportValidity();
        }
      });
      
      // Función de búsqueda
      document.getElementById('searchBtn').addEventListener('click', function() {
        const searchTerm = document.getElementById('searchInput').value.toLowerCase();
        const filtered = reconocimientos.filter(r => 
          r.motivo.toLowerCase().includes(searchTerm) ||
          r.reconocido.toLowerCase().includes(searchTerm) ||
          r.descripcion.toLowerCase().includes(searchTerm)
        );
        renderReconocimientos(filtered);
      });
      
      // Filtro por estado
      document.getElementById('statusFilter').addEventListener('change', function() {
        const status = this.value;
        const filtered = status ? reconocimientos.filter(r => r.estado === status) : reconocimientos;
        renderReconocimientos(filtered);
      });
      
      // Filtro por categoría
      document.getElementById('categoryFilter').addEventListener('change', function() {
        const category = this.value;
        const filtered = category ? reconocimientos.filter(r => r.categoria === category) : reconocimientos;
        renderReconocimientos(filtered);
      });
      
      // Función de logout
      document.getElementById('logoutBtn').addEventListener('click', function(e) {
        e.preventDefault();
        if (confirm('¿Estás seguro de que quieres cerrar sesión?')) {
          localStorage.removeItem('adminLoggedIn');
          localStorage.removeItem('adminUser');
          window.location.href = 'login.html';
        }
      });
      
      // Inicializar la página
      document.addEventListener('DOMContentLoaded', function() {
        renderReconocimientos();
      });
    </script>
  </body>
</html>
